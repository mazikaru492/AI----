AI問題変換アプリの構造図
================================

このシステムがどのように動いているか、初心者向けに解説します。

1. 全体の構成
--------------------------------
このアプリは大きく分けて「画面（フロントエンド）」と「裏方（バックエンド）」の2つでできています。

- **画面（フロントエンド）**: ユーザーが見たりボタンを押したりする場所
- **裏方（バックエンド）**: 計算したり、AIと通信したりする場所


2. 各ファイルの役割
--------------------------------
重要なファイルとその役割です。

📂 src (ソースコードの入れ物)
 ┣ 📂 app (ページの構成)
 ┃ ┣ 📄 page.tsx         <-- 【重要】メインの画面。ここが司令塔です。
 ┃ ┣ 📄 layout.tsx       <-- アプリ全体の枠組み（ヘッダーなど）。
 ┃ ┗ 📂 api
 ┃    ┗ 📂 generate      <-- 【重要】AIとやり取りする窓口。
 ┃
 ┣ 📂 components (画面の部品)
 ┃ ┣ 📄 CanvasImageEditor.tsx <-- 画像を編集したり数字を消したりする機能。
 ┃ ┣ 📄 ProblemPdf.tsx        <-- 問題用紙のPDFを作る機能。
 ┃ ┗ 📂 ui                    <-- ボタンやカードなど、小さな部品たち。
 ┃
 ┗ 📂 lib (便利な道具箱)
   ┗ 📄 gemini.ts (想定)      <-- AI (Gemini) を使うための準備プログラム。


3. データの流れ（簡潔版）
================================

👤 ユーザー
   ↓
   📸 画像をアップロード
   ↓
�️ 画面 (Frontend)
   - ファイル: src/app/page.tsx
   - ファイル: src/components/CanvasImageEditor.tsx
   ↓
   ⚡ 「AIで変換」ボタンを押す
   ↓
   📤 画像データを送信
   ↓
⚙️ 裏方 (Backend API)
   - ファイル: src/app/api/generate/route.ts
   ↓
   🤖 Gemini APIに画像を送る
   ↓
✨ AI (Google Gemini)
   ↓
   🤔 画像を解析 & 新しい問題を生成
   ↓
   � 結果を返す（JSON形式）
   ↓
⚙️ 裏方 (Backend API)
   ↓
   📦 データを整理
   ↓
   � 画面に返す
   ↓
🖥️ 画面 (Frontend)
   ↓
   🎨 新しい問題を表示
   ↓
    PDFダウンロードボタンを有効化
   - ファイル: src/components/ProblemPdf.tsx
   ↓
👤 ユーザー
   😊 完成！


【補足】
• Base64: 画像を文字列に変換して送信
• JSON: データを整理して送る形式
• API: 画面と裏方をつなぐ窓口 (/api/generate)
